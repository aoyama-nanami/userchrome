<?xml version="1.0"?>
<bindings id="generalBindings"
   xmlns="http://www.mozilla.org/xbl"
   xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
   xmlns:xbl="http://www.mozilla.org/xbl">

  <binding id="js"
      extends="chrome://global/content/bindings/toolbarbutton.xml#toolbarbutton-badged">
    <implementation>
        <constructor><![CDATA[
            function makeRelativePathURI(name) {
              let absolutePath = Components.stack.filename;
              let baseDir = absolutePath.substring(
                  0, absolutePath.lastIndexOf('/'));
              return baseDir + '/' + name;
            }
            console.log('hi')
            // The following code executes in the browser context,
            // i.e. chrome://browser/content/browser.xul
            Services.scriptloader.loadSubScriptWithOptions(
                makeRelativePathURI('mouseGestures.js'),
                {target: window, charset: 'utf-8', ignoreCache: true});
        ]]></constructor>
    </implementation>
  </binding>
</bindings>

